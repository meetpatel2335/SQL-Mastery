<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SQL 120 App</title>
    <style>
        :root {
            --primary: #007aff; /* iOS Blue */
            --bg: #f2f2f7;      /* iOS Grouped Table BG */
            --card-bg: #ffffff;
            --text: #000000;
            --secondary-text: #8e8e93;
            --border: #d1d1d6;
            --success: #34c759;
            --safe-bottom: env(safe-area-inset-bottom);
        }

        .dark-mode {
            --bg: #000000;
            --card-bg: #1c1c1e;
            --text: #ffffff;
            --secondary-text: #8e8e93;
            --border: #38383a;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding-bottom: calc(80px + var(--safe-bottom)); /* Space for Bottom Nav */
            transition: background 0.3s;
        }

        /* App Header */
        header {
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            padding: 15px 20px;
            border-bottom: 1px solid var(--border);
        }

        .dark-mode header { background: rgba(28, 28, 30, 0.8); }

        h1 { font-size: 1.2rem; margin: 0; text-align: center; }

        .progress-container { margin-top: 10px; }
        .progress-bg { background: var(--border); height: 6px; border-radius: 10px; overflow: hidden; }
        #progressBar { height: 100%; width: 0%; background: var(--success); transition: 0.5s ease; }

        /* Search & Actions */
        .search-box {
            padding: 10px 20px;
            display: flex;
            gap: 10px;
        }

        input#search {
            flex: 1;
            padding: 12px;
            border-radius: 10px;
            border: none;
            background: var(--card-bg);
            color: var(--text);
            font-size: 16px; /* Prevents auto-zoom on iOS */
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        /* Problem List (App-Style Rows) */
        .level-section {
            padding: 0 15px;
            margin-top: 20px;
        }

        .level-title {
            font-size: 0.85rem;
            color: var(--secondary-text);
            text-transform: uppercase;
            margin-left: 10px;
            margin-bottom: 8px;
        }

        .list-group {
            background: var(--card-bg);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }

        .problem-row {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            border-bottom: 0.5px solid var(--border);
            min-height: 55px; /* Thumb friendly */
        }

        .problem-row:last-child { border-bottom: none; }

        .checkbox-container {
            margin-right: 15px;
            display: flex;
            align-items: center;
        }

        input[type="checkbox"] {
            width: 22px;
            height: 22px;
            border-radius: 50%;
            border: 2px solid var(--border);
            appearance: none;
            cursor: pointer;
            position: relative;
        }

        input[type="checkbox"]:checked {
            background: var(--success);
            border-color: var(--success);
        }

        input[type="checkbox"]:checked::after {
            content: '‚úì';
            color: white;
            position: absolute;
            left: 4px;
            top: -1px;
            font-size: 16px;
        }

        .problem-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            text-decoration: none;
            color: inherit;
        }

        .prob-id { font-size: 0.75rem; color: var(--secondary-text); font-weight: bold; }
        .prob-name { font-size: 0.95rem; font-weight: 500; }
        .completed .prob-name { text-decoration: line-through; opacity: 0.5; }

        /* Bottom Tab Bar */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: calc(65px + var(--safe-bottom));
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding-bottom: var(--safe-bottom);
            border-top: 1px solid var(--border);
            z-index: 1000;
        }

        .dark-mode .bottom-nav { background: rgba(28, 28, 30, 0.9); }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--secondary-text);
            font-size: 0.7rem;
            text-decoration: none;
            cursor: pointer;
        }

        .nav-item.active { color: var(--primary); }
        .nav-icon { font-size: 1.4rem; margin-bottom: 2px; }

        /* Level Badges */
        .badge { font-size: 10px; padding: 2px 6px; border-radius: 5px; margin-left: auto; }
        .lvl-1 { background: #e3f2fd; color: #1976d2; }
        .lvl-2 { background: #fff3e0; color: #f57c00; }
        .lvl-3 { background: #f3e5f5; color: #7b1fa2; }
        .lvl-4 { background: #ffebee; color: #d32f2f; }

    </style>
</head>
<body>

<header>
    <h1>SQL Mastery 120</h1>
    <div class="progress-container">
        <div class="progress-bg"><div id="progressBar"></div></div>
        <div style="display: flex; justify-content: space-between; font-size: 0.75rem; margin-top: 5px;">
            <span id="progressText">0/120</span>
            <span id="percentText">0% Done</span>
        </div>
    </div>
</header>

<div class="search-box">
    <input type="text" id="search" placeholder="Search problems..." onkeyup="filter()">
    <button onclick="document.body.classList.toggle('dark-mode')" style="background:none; border:none; font-size: 20px;">üåì</button>
</div>

<div id="content"></div>

<nav class="bottom-nav">
    <div class="nav-item active" onclick="scrollToLevel(0)">
        <span class="nav-icon">‚ûä</span>
        <span>Lvl 1</span>
    </div>
    <div class="nav-item" onclick="scrollToLevel(1)">
        <span class="nav-icon">‚ûã</span>
        <span>Lvl 2</span>
    </div>
    <div class="nav-item" onclick="scrollToLevel(2)">
        <span class="nav-icon">‚ûå</span>
        <span>Lvl 3</span>
    </div>
    <div class="nav-item" onclick="scrollToLevel(3)">
        <span class="nav-icon">‚ûç</span>
        <span>Lvl 4</span>
    </div>
</nav>

<script>
    const data = [
        {
            title: "Level 1: Basics",
            problems: ["595 ‚Äì Big Countries", "584 ‚Äì Find Customer Referee", "175 ‚Äì Combine Two Tables", "183 ‚Äì Customers Who Never Order", "181 ‚Äì Employees Earning More Than Their Managers", "1873 ‚Äì Calculate Special Bonus", "196 ‚Äì Delete Duplicate Emails", "1667 ‚Äì Fix Names in a Table", "1484 ‚Äì Group Sold Products By The Date", "1527 ‚Äì Patients With a Condition", "1581 ‚Äì Customer Who Visited but Did Not Make Any Transactions", "1148 ‚Äì Article Views I", "1378 ‚Äì Replace Employee ID With The Unique Identifier", "1693 ‚Äì Daily Leads and Partners", "1741 ‚Äì Find Total Time Spent by Each Employee", "1393 ‚Äì Capital Gain/Loss", "1407 ‚Äì Top Travellers", "1517 ‚Äì Find Users With Valid E-Mails", "182 ‚Äì Duplicate Emails", "577 ‚Äì Employee Bonus", "586 ‚Äì Customer Placing the Largest Number of Orders", "607 ‚Äì Sales Person", "610 ‚Äì Triangle Judgement", "627 ‚Äì Swap Salary", "1873 ‚Äì Calculate Special Bonus"]
        },
        {
            title: "Level 2: Joins & Groups",
            problems: ["178 ‚Äì Rank Scores", "176 ‚Äì Second Highest Salary", "184 ‚Äì Department Highest Salary", "177 ‚Äì Nth Highest Salary", "185 ‚Äì Department Top Three Salaries", "550 ‚Äì Game Play Analysis IV", "511 ‚Äì Game Play Analysis I", "512 ‚Äì Game Play Analysis II", "534 ‚Äì Game Play Analysis III", "570 ‚Äì Managers with at Least 5 Direct Reports", "580 ‚Äì Count Student Number in Departments", "608 ‚Äì Tree Node", "612 ‚Äì Shortest Distance in a Plane", "613 ‚Äì Shortest Distance in a Line", "619 ‚Äì Biggest Single Number", "620 ‚Äì Not Boring Movies", "626 ‚Äì Exchange Seats", "1045 ‚Äì Customers Who Bought All Products", "1070 ‚Äì Product Sales Analysis III", "1084 ‚Äì Sales Analysis III", "1112 ‚Äì Highest Grade For Each Student", "1141 ‚Äì User Activity for the Past 30 Days I", "1142 ‚Äì User Activity for the Past 30 Days II", "1173 ‚Äì Immediate Food Delivery I", "1174 ‚Äì Immediate Food Delivery II", "1193 ‚Äì Monthly Transactions I", "1211 ‚Äì Queries Quality and Percentage", "1241 ‚Äì Number of Comments per Post", "1280 ‚Äì Students and Examinations", "1303 ‚Äì Find the Team Size"]
        },
        {
            title: "Level 3: Subqueries",
            problems: ["1341 ‚Äì Movie Rating", "1355 ‚Äì Activity Participants", "1364 ‚Äì Number of Trusted Contacts of a Customer", "1398 ‚Äì Customers Who Bought Products A and B but Not C", "1412 ‚Äì Find the Quiet Students in All Exams", "1445 ‚Äì Apples & Oranges", "1454 ‚Äì Active Users", "1468 ‚Äì Calculate Salaries", "1501 ‚Äì Countries You Can Safely Invest In", "1511 ‚Äì Customer Order Frequency", "1532 ‚Äì The Most Recent Three Orders", "1549 ‚Äì The Most Recent Orders for Each Product", "1565 ‚Äì Unique Orders and Customers Per Month", "1596 ‚Äì The Most Frequently Ordered Products", "1613 ‚Äì Find the Missing IDs", "1635 ‚Äì Hopper Company Queries I", "1645 ‚Äì Hopper Company Queries II", "1651 ‚Äì Hopper Company Queries III", "1661 ‚Äì Average Time of Process per Machine", "1667 ‚Äì Fix Names in a Table", "1677 ‚Äì Product's Worth Over Invoices", "1699 ‚Äì Number of Calls Between Two Persons", "1709 ‚Äì Biggest Window Between Visits", "1747 ‚Äì Leetflex Banned Accounts", "1767 ‚Äì Find the Subtasks That Did Not Execute", "1783 ‚Äì Grand Slam Titles", "1809 ‚Äì Ad-Free Sessions", "1841 ‚Äì League Statistics", "1875 ‚Äì Group Employees of the Same Salary", "1892 ‚Äì Page Recommendations II"]
        },
        {
            title: "Level 4: Advanced SQL",
            problems: ["1917 ‚Äì Leetcodify Friends Recommendations", "1934 ‚Äì Confirmation Rate", "1949 ‚Äì Strong Friendship", "1972 ‚Äì First and Last Call On the Same Day", "1990 ‚Äì Count the Number of Experiments", "2004 ‚Äì The Number of Seniors and Juniors", "2020 ‚Äì Number of Accounts That Did Not Stream", "2041 ‚Äì Accepted Candidates From the Interviews", "2051 ‚Äì The Category of Each Member in the Store", "2066 ‚Äì Account Balance", "2084 ‚Äì Drop Type 1 Orders for Customers With Type 0 Orders", "2112 ‚Äì The Airport With the Most Traffic", "2142 ‚Äì The Number of Passengers in Each Bus", "2159 ‚Äì Order Two Columns Independently", "2173 ‚Äì Longest Winning Streak", "2175 ‚Äì The Change in Global Rankings", "2199 ‚Äì Finding the Topic of Each Post", "2205 ‚Äì The Number of Users That Are Eligible for Discount", "2228 ‚Äì Users With Two Purchases Within Seven Days", "2238 ‚Äì Number of Times a Driver Was a Passenger", "2252 ‚Äì Dynamic Pivoting of a Table", "2292 ‚Äì Products With Three or More Orders in Two Consecutive Years", "2308 ‚Äì Arrange Table by Gender", "2324 ‚Äì Product Sales Analysis IV", "2346 ‚Äì Compute the Rank as a Percentage", "2362 ‚Äì Generate the Invoice", "2377 ‚Äì Sort the Olympic Table", "2394 ‚Äì Employees With Deductions", "2404 ‚Äì Most Frequent Even Element", "2420 ‚Äì Find All Good Indices", "2454 ‚Äì Next Greater Element IV", "2474 ‚Äì Customers With Strictly Increasing Purchases", "2480 ‚Äì Form a Chemical Bond", "2494 ‚Äì Merge Overlapping Events", "2504 ‚Äì Concatenate the Name and the Profession"]
        }
    ];

    let completed = JSON.parse(localStorage.getItem('sql_mobile_v1')) || {};

    function init() {
        const container = document.getElementById('content');
        container.innerHTML = '';
        
        data.forEach((lvl, lIdx) => {
            const section = document.createElement('div');
            section.className = 'level-section';
            section.id = 'level-' + lIdx;
            section.innerHTML = `<div class="level-title">${lvl.title}</div>`;
            
            const group = document.createElement('div');
            group.className = 'list-group';
            
            lvl.problems.forEach((prob, pIdx) => {
                const key = `l${lIdx}p${pIdx}`;
                const isDone = completed[key];
                const parts = prob.split(' ‚Äì ');
                
                const row = document.createElement('div');
                row.className = `problem-row ${isDone ? 'completed' : ''}`;
                row.innerHTML = `
                    <div class="checkbox-container">
                        <input type="checkbox" ${isDone ? 'checked' : ''} onclick="toggle('${key}')">
                    </div>
                    <a href="https://leetcode.com/problems/${parts[1].toLowerCase().replaceAll(' ', '-')}" 
                       target="_blank" class="problem-info">
                        <span class="prob-id">#${parts[0]}</span>
                        <span class="prob-name">${parts[1]}</span>
                    </a>
                    <span class="badge lvl-${lIdx+1}">L${lIdx+1}</span>
                `;
                group.appendChild(row);
            });
            section.appendChild(group);
            container.appendChild(section);
        });
        updateProgress();
    }

    function toggle(key) {
        completed[key] = !completed[key];
        localStorage.setItem('sql_mobile_v1', JSON.stringify(completed));
        init();
    }

    function updateProgress() {
        const done = Object.values(completed).filter(Boolean).length;
        const total = 120;
        const pc = Math.round((done/total)*100);
        document.getElementById('progressBar').style.width = pc + '%';
        document.getElementById('progressText').innerText = `${done} / ${total}`;
        document.getElementById('percentText').innerText = `${pc}% Done`;
    }

    function scrollToLevel(idx) {
        document.getElementById('level-' + idx).scrollIntoView({ behavior: 'smooth', block: 'start' });
        document.querySelectorAll('.nav-item').forEach((n, i) => {
            n.classList.toggle('active', i === idx);
        });
    }

    function filter() {
        const q = document.getElementById('search').value.toLowerCase();
        document.querySelectorAll('.problem-row').forEach(r => {
            r.style.display = r.innerText.toLowerCase().includes(q) ? 'flex' : 'none';
        });
    }

    init();
</script>
</body>
</html>
